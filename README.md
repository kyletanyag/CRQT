# Cyber Resiliency Quantification Tool (CRQT)

## Prerequisities
Make sure you have the following downloaded:
- [Node.js](https://nodejs.org/en/)
- [Ubuntu Subsystem for Windows](https://docs.microsoft.com/en-us/windows/wsl/install-win10)
- [Install Mongo Windows Service](https://docs.mongodb.com/manual/tutorial/install-mongodb-on-windows/#run-mongodb-from-cmd)
- [Python w/ pip](https://www.python.org/downloads/)

### Installing Ubuntu 20.04 subsystem for Windows
To install Ubuntu 20.04 subsystem for Windows go to Window's Control Panel -> Programs and select Turn Windows features on or off. From there, check mark Windows Subsystem for Linux and press ok. After this, it will install subsystem functionality and require restart. After restart, goto Microsoft store and install Ubuntu 20.04. Once installed, open Ubuntu 20.04 so to put username and passwd for terminal. Once completed, you can open Ubuntu 20.04 in Windows Terminal and cd to CRQT directory.  

If problems occur during installation, please refer to https://docs.microsoft.com/en-us/windows/wsl/install-win10 or https://adamtheautomator.com/windows-subsystem-for-linux/ or https://www.youtube.com/watch?v=av0UQy6g2FA.

## Initial Project Setup
### 1. You will need to download all the dependencies for the front-end application.
In Windows Powershell/CMD Terminal from root folder run the following commands:
```
cd .\FrontEnd\
npm install
```
Note: The npm install command only has to be run once. This downloads all the needed packages for Vue to compile and serve the application. It will take a while to run the first time as it has to download packages.

### 2. You will need to download all the dependencies for the back-end Flask server.
In Windows Powershell/CMD Terminal from root folder run the following commands:
```
cd .\BackEnd\
pip install -r requirements.txt
```

### 3. You will need to begin intialization of the [CVE-Search](https://github.com/cve-search/cve-search) project
In **Ubuntu terminal** the following commands:
```
$ cd /mnt/<path_to_crqt>/BackEnd
$ sudo apt-get update
$ sudo apt-get install python3
$ sudo apt-get install python3-pip
$ sudo apt-get install redis-server
$ pip3 install -r requirements.txt
$ sudo service redis-server start
$ cd ./dms/cve_search/
$ python3 ./sbin/db_mgmt_cpe_dictionary.py -p
$ python3 ./sbin/db_mgmt_json.py -p
$ python3 ./sbin/db_updater.py -c # This will take >45minutes on a decent machine,please be patient


## To Run Project
Once all servers are running, the CRQT application will be running at http://localhost:8080/.

### Run Front-End Server (Port 8080)
In Windows Powershell/CMD Terminal from root folder run the following commands:
```
cd .\FrontEnd\
npm run build
```

### Run Back-End Flask Server (Port 5000)
In Windows Powershell/CMD Terminal from root folder run the following commands:
```
cd .\BackEnd\
.\startup_flask.bat
```

### Run Back-End CVE-Search Server (Port 2000)
In Ubuntu Terminal from root folder run the following commands:
```
$ sudo service redis-server start
```

In Windows Powershell/CMD Terminal from root folder run the following commands:
```
cd .\BackEnd\
.\startup_cve_search.bat
```

### Updating Databases
To ensure results generated by the CRQT have the most up-to-date NVD Data, it is highly recommended to update the CVE-Search database weekly.
#### To fully repopulate the CVE-Search NVD database
In Ubuntu Terminal from root folder run the following commands:
```
$ cd ./BackEnd/DMS/cve_search/
$ sudo service redis-server start
$ python3 ./sbin/db_updater.py -v -f
```

#### To update without fully repopulating database
In Ubuntu Terminal from root folder run the following commands:
```
$ cd ./BackEnd/DMS/cve_search/
$ sudo service redis-server start
$ python3 ./sbin/db_updater.py -v
```

