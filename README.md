# Cyber Resiliency Quantification Tool (CRQT)

## Prerequisities
Make sure you have the following downloaded:
- [Node.js](https://nodejs.org/en/)
- [Ubuntu Subsystem for Windows](https://docs.microsoft.com/en-us/windows/wsl/install-win10)
- [Install Mongo Windows Service](https://docs.mongodb.com/manual/tutorial/install-mongodb-on-windows/#run-mongodb-from-cmd)
- [Python w/ pip](https://www.python.org/downloads/)


## Initial Project Setup
### 1. You will need to download all the dependencies for the front-end application.
In Windows Powershell/CMD Terminal from root folder run the following commands:
```
cd .\FrontEnd\
npm install
```
Note: The npm install command only has to be run once. This downloads all the needed packages for Vue to compile and serve the application. It will take a while to run the first time as it has to download packages.

### 2. You will need to download all the dependencies for the back-end Flask server.
In Windows Powershell/CMD Terminal from root folder run the following commands:
```
cd .\BackEnd\
pip install -r requirements.txt
```

### 3. You will need to begin intialization of the [CVE-Search](https://github.com/cve-search/cve-search) project
#### For automatic install of CVE-Search:
In Ubuntu Terminal from root folder run the following commands:
```
$ cd ./BackEnd
$ chmod 700 ./cve_search_install.sh 
$ ./cve_search_install.sh
```

#### For manual install of CVE-Search:
In Ubuntu Terminal from root folder run the following commands:
```
$ cd ./BackEnd/DMS/cve_search/
$ sudo apt-get install python3
$ sudo apt-get install python3-pip
$ sudo apt-get install redis-server
$ pip3 install flask flask-pymongo
$ sudo service redis-server start
```

In same terminal, download cve data: 
```
$ python3 ./sbin/db_mgmt_cpe_dictionary.py -p
$ python3 ./sbin/db_mgmt_json.py -p
$ python3 ./sbin/db_updater.py -c # This will take >45minutes on a decent machine, please be patient.
```


## To Run Project
Once all servers are running, the CRQT application will be running at http://localhost:8080/.

### Run Front-End Server (Port 8080)
In Windows Powershell/CMD Terminal from root folder run the following commands:
```
cd .\FrontEnd\
npm run build
```

### Run Back-End Flask Server (Port 5000)
In Windows Powershell/CMD Terminal from root folder run the following commands:
```
cd .\BackEnd\
.\startup_flask.bat
```

### Run Back-End CVE-Search Server (Port 2000)
In Ubuntu Terminal from root folder run the following commands:
```
$ sudo service redis-server start
```

In Windows Powershell/CMD Terminal from root folder run the following commands:
```
cd .\BackEnd\
.\startup_cve_search.bat
```

### Updating Databases
To ensure results generated by the CRQT have the most up-to-date NVD Data, it is highly recommended to update the CVE-Search database weekly.
#### To fully repopulate the CVE-Search NVD database
In Ubuntu Terminal from root folder run the following commands:
```
$ cd ./BackEnd/DMS/cve_search/
$ sudo service redis-server start
$ python3 ./sbin/db_updater.py -v -f
```

#### To update without fully repopulating database
In Ubuntu Terminal from root folder run the following commands:
```
$ cd ./BackEnd/DMS/cve_search/
$ sudo service redis-server start
$ python3 ./sbin/db_updater.py -v
```

